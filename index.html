<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡§Ö‡§µ‡§≤‡•ã‡§ï‡§® ‚Ä¢ Avlokan ‚Äì Bilingual Mental Health Chatbot</title>
  <style>
    :root {
      --bg-light: #eaf6ff;
      --card-light: #ffffff;
      --ink-light: #0b2239;
      --muted-light: #3a5169;
      --brand-light: #2563eb;
      --brand-2-light: #22c55e;
      --danger-light: #b91c1c;
      --ok-light: #15803d;
      --chip-light: #0ea5e9;

      --bg-dark: #121b2a;
      --card-dark: #1e293b;
      --ink-dark: #cbd5e1;
      --muted-dark: #94a3b8;
      --brand-dark: #3b82f6;
      --brand-2-dark: #22c55e;
      --danger-dark: #ef4444;
      --ok-dark: #22c55e;
      --chip-dark: #22d3ee;
    }
    [data-theme="light"] {
      --bg: var(--bg-light);
      --card: var(--card-light);
      --ink: var(--ink-light);
      --muted: var(--muted-light);
      --brand: var(--brand-light);
      --brand-2: var(--brand-2-light);
      --danger: var(--danger-light);
      --ok: var(--ok-light);
      --chip: var(--chip-light);
    }
    [data-theme="dark"] {
      --bg: var(--bg-dark);
      --card: var(--card-dark);
      --ink: var(--ink-dark);
      --muted: var(--muted-dark);
      --brand: var(--brand-dark);
      --brand-2: var(--brand-2-dark);
      --danger: var(--danger-dark);
      --ok: var(--ok-dark);
      --chip: var(--chip-dark);
    }
    * {
      box-sizing: border-box;
    }
    html,
    body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--ink);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      transition: background-color 0.3s, color 0.3s;
    }
    #app {
      width: min(920px, 100%);
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: 16px;
      height: 90vh;
      max-height: 900px;
    }
    .panel {
      background: var(--card);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      border: 1px solid #e6eef6;
      display: flex;
      flex-direction: column;
    }
    /* LEFT: sidebar */
    #sidebar {
      padding: 14px;
      display: flex;
      flex-direction: column;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 4px 8px 12px 8px;
    }
    .logo {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      display: grid;
      place-items: center;
      color: white;
      font-weight: 800;
    }
    h1 {
      font-size: 18px;
      margin: 0;
    }
    .sub {
      font-size: 12px;
      color: var(--muted);
    }
    .section {
      margin-top: 14px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .section h3 {
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
      margin: 12px 6px;
      flex-shrink: 0;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #f2f7ff;
      border: 1px solid #e6eef6;
      color: var(--ink);
      padding: 6px 10px;
      border-radius: 999px;
      margin: 6px 6px 0 0;
      cursor: pointer;
      font-size: 12px;
      user-select: none;
      transition: background-color 0.3s, color 0.3s;
    }
    .pill:hover {
      background: #eef4ff;
    }
    .danger {
      background: #fff2f2;
      border-color: #ffdede;
      color: var(--danger);
    }
    .ok {
      background: #f1fff6;
      border-color: #dff7e9;
      color: var(--ok);
    }
    .note {
      font-size: 12px;
      color: var(--muted);
      padding: 8px 8px 0 8px;
      flex-shrink: 0;
    }

    /* RIGHT: chat */
    #chatbox {
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 560px;
    }
    #topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      border-bottom: 1px solid var(--muted);
      flex-shrink: 0;
    }
    #status {
      font-weight: 600;
    }
    #langWrap {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .langBtn {
      background: var(--ink);
      color: var(--card);
      border: none;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    .langBtn[aria-pressed="true"] {
      background: var(--brand);
      color: white;
    }
    #themeToggle {
      margin-left: 12px;
      font-size: 12px;
      cursor: pointer;
      border: none;
      padding: 6px 12px;
      border-radius: 10px;
      background: var(--brand-2);
      color: white;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    #themeToggle:hover {
      background: #16a34a;
    }
    #chatlogs {
      flex: 1;
      overflow-y: auto;
      padding: 14px;
      background: linear-gradient(180deg, var(--card) 0%, #fbfdff 100%);
      border-radius: 0 0 16px 16px;
      scrollbar-width: thin;
      scrollbar-color: var(--brand) transparent;
    }
    #chatlogs::-webkit-scrollbar {
      width: 8px;
    }
    #chatlogs::-webkit-scrollbar-thumb {
      background-color: var(--brand);
      border-radius: 10px;
    }
    .msg {
      max-width: 80%;
      padding: 10px 14px;
      margin: 8px 0;
      border-radius: 16px;
      line-height: 1.4;
      word-wrap: break-word;
      transition: background-color 0.3s, color 0.3s;
    }
    .bot {
      background: var(--brand);
      color: white;
      align-self: flex-start;
      border-top-left-radius: 4px;
    }
    .user {
      background: var(--ink);
      color: white;
      align-self: flex-end;
      border-top-right-radius: 4px;
    }
    .time {
      display: block;
      font-size: 10px;
      opacity: 0.7;
      margin-top: 6px;
      user-select: none;
    }
    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 8px 12px;
      border-top: 1px solid var(--muted);
      background: var(--card);
      border-radius: 0 0 16px 16px;
      flex-shrink: 0;
    }
    .chip {
      background: var(--ink);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
      user-select: none;
      transition: background-color 0.3s;
    }
    .chip:hover {
      background: var(--brand);
    }
    .chip.alt {
      background: var(--brand);
    }
    #inputArea {
      display: flex;
      gap: 8px;
      padding: 12px;
      border-top: 1px solid var(--muted);
      background: var(--card);
      border-radius: 0 0 16px 16px;
      flex-shrink: 0;
    }
    #inputBox {
      flex: 1;
      border-radius: 14px;
      border: 1px solid #d9e6f2;
      padding: 12px 14px;
      font-size: 15px;
      outline: none;
      transition: border-color 0.3s;
    }
    #inputBox:focus {
      border-color: var(--brand);
    }
    #sendBtn {
      background: var(--ink);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: filter 0.3s;
    }
    #sendBtn:hover {
      filter: brightness(1.05);
    }
    .typing {
      opacity: 0.6;
      font-style: italic;
    }
    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
        "Courier New", monospace;
      background: #020202;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 12px;
      user-select: none;
    }

    @media (max-width: 820px) {
      #app {
        grid-template-columns: 1fr;
        height: 100vh;
      }
      #chatbox {
        height: 80vh;
      }
      #sidebar {
        height: unset;
        padding-bottom: 10px;
      }
    }
  </style>
</head>
<body data-theme="light">
  <div id="app">
    <!-- Sidebar -->
    <aside id="sidebar" class="panel">
      <div class="brand">
        <div class="logo">A</div>
        <div>
          <h1>‡§Ö‡§µ‡§≤‡•ã‡§ï‡§® ‚Ä¢ Avlokan</h1>
          <div class="sub">Bilingual mental-wellness companion</div>
        </div>
      </div>

      <div class="section">
        <h3>Quick Tools</h3>
        <div class="pill ok" data-tool="/ground">5-4-3-2-1 Grounding</div>
        <div class="pill ok" data-tool="/boxbreathe">Box Breathing</div>
        <div class="pill ok" data-tool="/478">4-7-8 Breathing</div>
        <div class="pill ok" data-tool="/reframe">CBT Thought Reframe</div>
        <div class="pill ok" data-tool="/journal">Journaling Prompt</div>
        <div class="pill ok" data-tool="/sleep">Sleep Hygiene Tips</div>
        <div class="pill ok" data-tool="/study">Study Focus (Pomodoro)</div>
      </div>

      <div class="section">
        <h3>Safety</h3>
        <div class="pill danger" data-tool="/helpnow">I need urgent help</div>
        <div class="note">If you or someone else is in immediate danger, contact your local emergency number (e.g., <b>112</b>) or go to the nearest hospital. Avlokan is supportive guidance, not a substitute for professional care.</div>
      </div>

      <div class="section" style="flex-direction: row; align-items: center; justify-content: space-between; margin-top: 18px;">
        <h3 style="margin: 0;">Tips</h3>
        <button id="themeToggle" title="Toggle Light/Dark Mode">Dark Mode</button>
      </div>
      <div class="section" style="margin-top: 6px;">
        <div class="note">Type <span class="kbd">/help</span> for commands. You can write in <b>English or ‡§π‡§ø‡§Ç‡§¶‡•Ä</b>, and switch anytime.</div>
      </div>
    </aside>

    <!-- Chat -->
    <main id="chat" class="panel">
      <div id="chatbox">
        <div id="topbar">
          <div id="status">üôÇ Ready</div>
          <div id="langWrap">
            <button class="langBtn" id="langHindi" aria-pressed="false">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
            <button class="langBtn" id="langEnglish" aria-pressed="true">English</button>
          </div>
        </div>
        <div id="chatlogs"></div>
        <div class="chips" id="suggestions"></div>
        <div id="inputArea">
          <input id="inputBox" type="text" placeholder="Type your message‚Ä¶ (/help for options)" autocomplete="off" />
          <button id="sendBtn">Send</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // ====== Utilities ======
    const $ = sel => document.querySelector(sel);
    const chatlogs = $('#chatlogs');
    const inputBox = $('#inputBox');
    const sendBtn = $('#sendBtn');
    const langHindi = $('#langHindi');
    const langEnglish = $('#langEnglish');
    const suggestions = $('#suggestions');
    const statusEl = $('#status');
    const themeToggle = $('#themeToggle');
    const body = document.body;

    function nowTime() {
      const d = new Date();
      return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }
    function appendMessage(text, who = 'bot', opts = {}) {
      const div = document.createElement('div');
      div.className = `msg ${who}`;
      div.innerHTML = text + `<span class="time">${opts.time || nowTime()}</span>`;
      chatlogs.appendChild(div);
      chatlogs.scrollTop = chatlogs.scrollHeight;
    }
    function setTyping(on = true) {
      if (on) {
        appendMessage(currentLang === 'hi' ? '‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‚Ä¶' : 'Typing‚Ä¶', 'bot', { time: '' });
        chatlogs.lastChild.classList.add('typing');
      } else if (chatlogs.lastChild && chatlogs.lastChild.classList.contains('typing')) {
        chatlogs.removeChild(chatlogs.lastChild);
      }
    }
    function chip(text, handler) {
      const b = document.createElement('button');
      b.className = 'chip';
      b.textContent = text;
      b.addEventListener('click', handler);
      return b;
    }

    // ====== Language & State ======
    let currentLang = 'en';
    let context = { intent: null, sub: null, mood: null, crisis: false };

    function setLang(lang) {
      currentLang = lang;
      langHindi.setAttribute('aria-pressed', lang === 'hi');
      langEnglish.setAttribute('aria-pressed', lang === 'en');
      inputBox.placeholder = lang === 'hi' ? '‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•á‡§Ç‚Ä¶ (/help ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è)' : 'Type your message‚Ä¶ (/help for options)';
      greet();
    }

    function greet() {
      chatlogs.innerHTML = '';
      const hi = currentLang === 'hi';
      appendMessage(hi ? '‡§Ö‡§µ‡§≤‡•ã‡§ï‡§® ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! ‡§Ü‡§™ ‡§ï‡•à‡§∏‡•á ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç? ‡§Ü‡§™ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ø‡§æ ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡§º‡•Ä ‡§ï‡§ø‡§∏‡•Ä ‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§¨‡§æ‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Welcome to Avlokan! How are you feeling today? You can chat in English or Hindi.', 'bot');
      renderSuggestions(['stress','anxiety','sleep','study','lonely','angry','panic','/help']);
    }

    // ====== Lexicon & Intents ======
    const INTENTS = [
      { id: 'crisis', en: [/suicide|kill myself|end my life|hurt myself|self\s*harm|cutting|can\s*t go on|i want to die|worthless/i], hi: [/‡§Ü‡§§‡•ç‡§Æ‡§π‡§§‡•ç‡§Ø‡§æ|‡§ñ‡§º‡§§‡•ç‡§Æ ‡§ï‡§∞‡§®‡§æ|‡§ñ‡§§‡§Æ ‡§ï‡§∞‡§®‡§æ|‡§ñ‡•Å‡§¶ ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§®|‡§ï‡§ü‡§ø‡§Ç‡§ó|‡§Æ‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡§æ|‡§ú‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ/i], handler: handleCrisis },
      { id: 'greeting', en: [/hello|hi\b|hey|good (morning|afternoon|evening)/i], hi: [/‡§®‡§Æ‡§∏‡•ç‡§§‡•á|‡§∏‡§≤‡§æ‡§Æ|‡§π‡§æ‡§Ø|‡§∏‡•Å‡§™‡•ç‡§∞‡§≠‡§æ‡§§|‡§∂‡•Å‡§≠\s*(‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ|‡§∞‡§æ‡§§‡•ç‡§∞‡§ø|‡§¶‡•ã‡§™‡§π‡§∞)/], handler: handleGreeting },
      { id: 'stress', en: [/stress(ed)?|overwhelm|burnout|pressure/i], hi: [/‡§§‡§®‡§æ‡§µ|‡§¶‡§¨‡§æ‡§µ|‡§•‡§ï‡§æ‡§µ‡§ü|‡§ì‡§µ‡§∞‡§µ‡•á‡§≤‡•ç‡§Æ/], handler: handleStress },
      { id: 'anxiety', en: [/anxiety|anxious|worry|nervous|panic( attack)?/i], hi: [/‡§ö‡§ø‡§Ç‡§§‡§æ|‡§ò‡§¨‡§∞‡§æ‡§π‡§ü|‡§¨‡•á‡§ö‡•à‡§®‡•Ä|‡§™‡•à‡§®‡§ø‡§ï/], handler: handleAnxiety },
      { id: 'sleep', en: [/sleep|insomnia|can\'?t (sleep|fall asleep)|night(mare| terror)s?/i], hi: [/‡§®‡•Ä‡§Ç‡§¶|‡§®‡•Ä‡§¶|‡§∏‡•ã ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ|‡§ñ‡§∞‡§æ‡§¨ (‡§®‡•Ä‡§Ç‡§¶|‡§∏‡§™‡§®‡§æ)/], handler: handleSleep },
      { id: 'mood_low', en: [/sad|depress(ed|ion)?|low mood|empty|cry/i], hi: [/‡§â‡§¶‡§æ‡§∏|‡§°‡§ø‡§™‡•ç‡§∞‡•á‡§∂‡§®|‡§Æ‡§® (‡§â‡§¶‡§æ‡§∏|‡§ñ‡§æ‡§≤‡•Ä)/], handler: handleLowMood },
      { id: 'anger', en: [/angry|irritat(ed|ion)|rage|mad/i], hi: [/‡§ó‡•Å‡§∏‡•ç‡§∏‡§æ|‡§ö‡§ø‡§¢‡§º|‡§ï‡•ç‡§∞‡•ã‡§ß/], handler: handleAnger },
      { id: 'lonely', en: [/lonely|alone|no one (cares|understands)/i], hi: [/‡§Ö‡§ï‡•á‡§≤|‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç ‡§∏‡§Æ‡§ù‡§§‡§æ/], handler: handleLonely },
      { id: 'study', en: [/study|exam|test|assignment|focus|procrastinat(e|ion)/i], hi: [/‡§™‡§¢‡§º‡§æ‡§à|‡§á‡§Æ‡•ç‡§§‡§ø‡§π‡§æ‡§®|‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ|‡§Ö‡§∏‡§æ‡§á‡§®‡§Æ‡•á‡§Ç‡§ü|‡§ü‡§æ‡§≤‡§Æ‡§ü‡•ã‡§≤/], handler: handleStudy },
      { id: 'relationship', en: [/friend(ship)?|breakup|relationship|parents?|teacher|bully/i], hi: [/‡§¶‡•ã‡§∏‡•ç‡§§‡•Ä|‡§∞‡§ø‡§∂‡•ç‡§§‡§æ|‡§¨‡•ç‡§∞‡•á‡§ï‡§Ö‡§™|‡§Æ‡§æ‡§§‡§æ\s*‡§™‡§ø‡§§‡§æ|‡§Ö‡§≠‡§ø‡§≠‡§æ‡§µ‡§ï|‡§ü‡•Ä‡§ö‡§∞|‡§¨‡§¶‡§Æ‡§æ‡§∂‡•Ä|‡§¨‡•Å‡§≤‡•Ä/], handler: handleRelationship },
      { id: 'body', en: [/body (image|shame)|weight|diet|look|appearance/i], hi: [/‡§∂‡§∞‡•Ä‡§∞|‡§µ‡§ú‡§®|‡§¶‡§ø‡§ñ‡§æ‡§µ‡§ü|‡§¨‡•â‡§°‡•Ä/], handler: handleBody },
      { id: 'help', en: [/^\/help\b|help|what can you do/i], hi: [/^\/help\b|‡§Æ‡§¶‡§¶|‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á/], handler: handleHelp },
      { id: 'tool_cmd', en: [/^\/(ground|boxbreathe|478|reframe|journal|sleep|study|helpnow)\b/i], hi: [/^\/(ground|boxbreathe|478|reframe|journal|sleep|study|helpnow)\b/], handler: handleToolCommand },
      { id: 'gratitude', en: [/thank(s| you)|appreciate/i], hi: [/‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶|‡§∂‡•Å‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ|‡§•‡•à‡§Ç‡§ï/], handler: handleThanks },
      { id: 'goodbye', en: [/bye|goodbye|see you|gtg/i], hi: [/‡§Ö‡§≤‡§µ‡§ø‡§¶‡§æ|‡§ö‡§≤‡§§‡§æ ‡§π‡•Ç‡§Å|‡§´‡§ø‡§∞ ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á/], handler: handleBye },
    ];

    // ====== Core Router ======
    function detectIntent(text) {
      for (const intent of INTENTS) {
        const arr = currentLang === 'hi' ? intent.hi : intent.en;
        for (const rx of arr) {
          if (rx.test(text)) return intent;
        }
      }
      return null;
    }

    function route(text) {
      // Basic moderation for profanity (soft)
      if (/\b(fuck|shit|bitch|asshole|‡§ö‡•Ç‡§§|‡§∏‡§æ‡§≤‡§æ)\b/i.test(text)) {
        appendMessage(currentLang === 'hi' ? '‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Å ‡§ï‡§ø ‡§≠‡§æ‡§µ‡§®‡§æ‡§è‡§Å ‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§ö‡§≤‡§ø‡§è ‡§á‡§∏‡•á ‡§Æ‡§ø‡§≤‡§ï‡§∞ ‡§∏‡§Å‡§≠‡§æ‡§≤‡§§‡•á ‡§π‡•à‡§Ç‚Äî‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á ‡§ï‡§ø ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§è‡§ï ‡§ï‡§∏‡§∞‡§§ ‡§ï‡§∞‡§æ‡§ä‡§Å?' : "I hear a lot of intensity there. Let's channel it safely‚Äîwant a quick calming exercise?", 'bot');
        renderSuggestions(['/ground', '/boxbreathe', 'anger', 'stress']);
        return;
      }
      const intent = detectIntent(text);
      if (intent) {
        intent.handler(text);
      } else {
        handleFallback(text);
      }
    }

    // ====== Handlers (detailed answers) ======

    function handleCrisis() {
      context.crisis = true;
      const m = currentLang === 'hi'
        ? `<b>‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•ã ‡§∏‡§¨‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∞‡§ñ‡§§‡§æ ‡§π‡•Ç‡§Å‡•§</b> ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§ñ‡•Å‡§¶ ‡§ï‡•ã ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§™‡§π‡•Å‡§Ç‡§ö‡§æ‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§∏‡•ã‡§ö ‡§∞‡§π‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã <b>‡§§‡•Å‡§∞‡§Ç‡§§</b> ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡§∞‡•ã‡§∏‡•á‡§Æ‡§Ç‡§¶ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç, ‡§Ö‡§™‡§®‡•á ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡§Ç‡§¨‡§∞ <b>112</b> ‡§™‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç, ‡§Ø‡§æ ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§ú‡§æ‡§è‡§Å‡•§<br><br>‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•Ç‡§Å‡•§ ‡§ú‡§¨ ‡§§‡§ï ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§™‡§π‡•Å‡§Å‡§ö‡§§‡•Ä ‡§π‡•à, ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Æ‡•á‡§∞‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§®‡•á ‡§ï‡•Ä ‡§ï‡§∏‡§∞‡§§ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á? <span class="kbd">/ground</span> ‡§Ø‡§æ <span class="kbd">/478</span> ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§`
        : `<b>Your safety comes first.</b> If you're thinking about harming yourself, please <b>seek immediate help</b>: call your local emergency number (e.g., <b>112</b>), tell a trusted person nearby, or go to the nearest hospital.<br><br>I'm here with you. While help arrives, would you try a breathing exercise with me? Type <span class="kbd">/ground</span> or <span class="kbd">/478</span>.`;
      appendMessage(m, 'bot');
      renderSuggestions(['/helpnow', 'trusted person', 'grounding', 'breathing']);
    }

    function handleGreeting() {
      appendMessage(currentLang === 'hi' ? '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡§æ ‡§Æ‡§® ‡§ï‡•à‡§∏‡§æ ‡§π‡•à? ‡§è‡§ï ‡§∂‡§¨‡•ç‡§¶ ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§è‡§Å (‡§ú‡•à‡§∏‡•á: ‡§∂‡§æ‡§Ç‡§§, ‡§ö‡§ø‡§Ç‡§§‡§ø‡§§, ‡§•‡§ï‡§æ ‡§π‡•Å‡§Ü)‡•§' : 'Hi! How does your mind feel right now? Share one word (e.g., calm, anxious, tired).', 'bot');
      renderSuggestions(['stress', 'anxiety', 'sleep', 'study', 'lonely']);
    }

    function handleStress() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§§‡§®‡§æ‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§î‡§∞ ‡§Æ‡§® ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§Ø‡•á ‡§§‡§¨ ‡§Ü‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ‡§è‡§Å, ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡§ø‡§Ø‡§æ‡§Å ‡§Ø‡§æ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•ã ‡§≤‡•á‡§ï‡§∞ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§¨‡§¢‡§º ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§<br><br>' +
          '‡§ï‡§æ‡§∞‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç?<ul><li>‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤</li><li>‡§ï‡§ø‡§∏‡•Ä ‡§è‡§ï ‡§µ‡§ø‡§∑‡§Ø/‡§ï‡§æ‡§Æ ‡§ï‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ</li><li>‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ ‡§ï‡§∞ ‡§™‡§æ‡§®‡•á ‡§ï‡§æ ‡§°‡§∞</li><li>‡§ï‡§Æ ‡§∏‡•ã‡§®‡§æ ‡§Ø‡§æ ‡§•‡§ï‡§æ‡§µ‡§ü</li></ul>' +
          '‚≠ê <b>‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®:</b> ‡§§‡§®‡§æ‡§µ ‡§ï‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‚Äî‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§Æ‡§ø‡§®‡§ü ‡§ó‡§π‡§∞‡•Ä ‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§Ç (Box Breathing) ‡§Ø‡§æ 5-4-3-2-1 ‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Å‡•§ ‡§∏‡§Æ‡§Ø ‡§•‡•ã‡§°‡§º‡•Ä ‡§¶‡•á‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡•ã‡§® ‡§Ö‡§≤‡§ó ‡§∞‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§¨‡§æ‡§π‡§∞ ‡§ü‡§π‡§≤‡•á‡§Ç‡•§ ‡§Ü‡§™ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§§‡•ã ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§§‡§®‡§æ‡§µ ‡§ï‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§'
          : 'Stress affects both mind and body. It often arises when our expectations, responsibilities, or worries about the future become overwhelming.<br><br>' +
          'What can trigger stress?<ul><li>Spending lots of time on social media</li><li>Concerns about a specific topic or task</li><li>Fear of not meeting expectations</li><li>Lack of sleep or fatigue</li></ul>' +
          '‚≠ê <b>Natural solution:</b> Try to de-stress by practicing slow deep breathing (Box Breathing) or the 5-4-3-2-1 grounding exercise. Put your phone away for a bit and take a short walk. You‚Äôre welcome to talk to me more about what‚Äôs causing your stress.'
      , 'bot'
      );
      renderSuggestions(['/boxbreathe', '/ground', '/reframe', 'work', 'exams', 'family']);
    }

    function handleAnxiety() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä ‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§ï‡§æ‡§∞‡§£‡•ã‡§Ç ‡§∏‡•á ‡§≠‡•Ä ‡§Ü ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§ ‡§á‡§∏‡§∏‡•á ‡§¶‡§ø‡§≤ ‡§§‡•á‡§ú‡§º ‡§ß‡§°‡§º‡§ï‡§®‡§æ, ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§ï‡§ø‡§∏‡•Ä ‡§¨‡§æ‡§§ ‡§ï‡•Ä ‡§ü‡•á‡§Ç‡§∂‡§® ‡§π‡•ã‡§®‡§æ, ‡§Ø‡§æ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§Ö‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§‡§§‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã‡§®‡§æ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡•§<br><br>' +
          '‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§π‡•ã ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç? <ul><li>‡§ñ‡§º‡§¨‡§∞ ‡§Ø‡§æ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§Ö‡§§‡§ø</li><li>‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§ö‡•Å‡§®‡•å‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§°‡§∞</li><li>‡§Ö‡§ï‡•á‡§≤‡§æ‡§™‡§® ‡§Ø‡§æ ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§¶‡•Å‡§ñ‡•Ä ‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§∏‡•Å‡§®‡§®‡§æ</li></ul>' +
          '‚≠ê <b>‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?</b> 4-7-8 ‡§¨‡•ç‡§∞‡•Ä‡§¶‡§ø‡§Ç‡§ó ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Å, ‡§Æ‡§® ‡§ï‡•ã ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§™‡§∞ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§≤‡§ø‡§ñ ‡§°‡§æ‡§≤‡•á‡§Ç‚Äî‡§á‡§∏‡§∏‡•á ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§¶‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§'
          : 'Anxiety can show up sometimes without a clear reason. It might include fast heartbeat, repeated worrying, or fear of the unknown.<br><br>' +
          'What might cause it?<ul><li>Overuse of news or social media</li><li>Fear of uncertain challenges</li><li>Isolation or listening to sad music repeatedly</li></ul>' +
          '‚≠ê <b>What helps?</b> Try the 4-7-8 breathing exercise, bring your attention to the present, and write out your thoughts‚Äîthis can help you challenge those worries.'
      , 'bot'
      );
      renderSuggestions(['/478', '/ground', '/reframe', 'panic']);
    }

    function handleSleep() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§®‡•Ä‡§Ç‡§¶ ‡§∂‡§∞‡•Ä‡§∞ ‡§î‡§∞ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§π‡•Å‡§§ ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡•§ ‡§ñ‡§∞‡§æ‡§¨ ‡§®‡•Ä‡§Ç‡§¶ ‡§ï‡•Ä ‡§µ‡§ú‡§π‡•á‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡§Ç‚Äî‡§≤‡§Ç‡§¨‡§æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ü‡§æ‡§á‡§Æ, ‡§¶‡•á‡§∞ ‡§∞‡§æ‡§§ ‡§§‡§ï ‡§ó‡§æ‡§®‡•á ‡§∏‡•Å‡§®‡§®‡§æ (‡§ñ‡§æ‡§∏‡§ï‡§∞ ‡§â‡§¶‡§æ‡§∏), ‡§Ø‡§æ ‡§ö‡§ø‡§Ç‡§§‡§æ‡•§<br><br>' +
          '‡§∏‡§Ç‡§ï‡•á‡§§: <ul><li>‡§∏‡•ã‡§®‡•á-‡§â‡§†‡§®‡•á ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§∞‡•á‡§ó‡•Å‡§≤‡§∞ ‡§®‡§π‡•Ä‡§Ç</li><li>‡§∞‡§æ‡§§ ‡§Æ‡•á‡§Ç ‡§â‡§†‡§®‡§æ ‡§Ø‡§æ ‡§¨‡•á‡§ö‡•à‡§®‡•Ä</li></ul>' +
          '‚≠ê <b>‡§ü‡§ø‡§™‡•ç‡§∏:</b> ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§∏‡•ã‡§è‡§Ç, ‡§∏‡•ã‡§®‡•á ‡§∏‡•á 1-2 ‡§ò‡§Ç‡§ü‡•á ‡§™‡§π‡§≤‡•á ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤/‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡•Ç‡§∞ ‡§∞‡§ñ‡•á‡§Ç, ‡§∂‡§æ‡§Ç‡§§ ‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§Ø‡§æ ‡§ó‡§π‡§∞‡•Ä ‡§∏‡§æ‡§Å‡§∏‡•á‡§Ç ‡§≤‡•á‡§Ç, ‡§ï‡•à‡§´‡•Ä‡§® ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§∏‡•ã‡§®‡•á ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ï‡•ç‡§ï‡§§ ‡§π‡•ã ‡§§‡•ã <span class="kbd">/sleep</span> ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§'
          : 'Sleep is critical for mind and body. Poor sleep can be caused by too much screen time, staying up late listening to music (especially sad songs), or anxiety.<br><br>' +
          'Warning signs: <ul><li>Irregular sleep/wake times</li><li>Restlessness or waking in the night</li></ul>' +
          '‚≠ê <b>Tips:</b> Stick to a regular sleep schedule, turn off screens 1-2 hours before bed, listen to calming music or practice deep breathing, and cut down on caffeine. For a checklist, type <span class="kbd">/sleep</span>.'
      , 'bot'
      );
      renderSuggestions(['/sleep', 'anxiety', 'stress', 'night routine']);
    }

    function handleLowMood() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§ñ‡§∞‡§æ‡§¨ ‡§Æ‡•Ç‡§° ‡§Ø‡§æ ‡§â‡§¶‡§æ‡§∏‡•Ä ‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§Ø‡§π ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø ‡§Ü‡§™ ‡§Ö‡§ï‡•á‡§≤‡•á ‡§π‡•à‡§Ç‡•§ ‡§ï‡§à ‡§¨‡§æ‡§∞ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§§‡•Å‡§≤‡§®‡§æ, ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§®‡§ø‡§∞‡§æ‡§∂‡§æ, ‡§Ø‡§æ ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§â‡§¶‡§æ‡§∏ ‡§ó‡§æ‡§®‡•á ‡§∏‡•Å‡§®‡§®‡§æ ‡§ê‡§∏‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§<br><br>' +
          '‚≠ê <b>‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?</b> ‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§µ‡§®‡§æ‡§è‡§Å ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§ñ‡•á‡§Ç (<span class="kbd">/journal</span> ‡§ü‡•ç‡§∞‡§æ‡§Ø ‡§ï‡§∞‡•á‡§Ç), ‡§π‡§≤‡•ç‡§ï‡•Ä ‡§ö‡§π‡§≤‡§ï‡§¶‡§Æ‡•Ä ‡§ï‡§∞‡•á‡§Ç, ‡§Ø‡§æ ‡§¶‡•ã‡§∏‡•ç‡§§‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§õ‡•ã‡§ü‡•á ‡§ï‡§¶‡§Æ ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§'
          : 'Feeling low is very common. Comparing yourself on social media, repeated disappointments, or listening to sad music often can make it worse.<br><br>' +
          '‚≠ê <b>Try this:</b> Write your feelings out (try <span class="kbd">/journal</span>), take a gentle walk, or message a friend. Start with tiny steps.'
      , 'bot'
      );
      renderSuggestions(['/journal', '/reframe', 'go for a walk', 'text a friend']);
    }

    function handleAnger() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§ó‡•Å‡§∏‡•ç‡§∏‡§æ ‡§Ü‡§®‡§æ ‡§è‡§ï ‡§∏‡•ç‡§µ‡§æ‡§≠‡§æ‡§µ‡§ø‡§ï ‡§≠‡§æ‡§µ‡§®‡§æ ‡§π‡•à, ‡§™‡§∞ ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§Ø‡§π ‡§®‡•Ä‡§Ç‡§¶, ‡§≠‡•Ç‡§ñ ‡§Ø‡§æ ‡§§‡§®‡§æ‡§µ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§∞‡§π ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§<br><br>‡§∏‡•ã‡§ö‡•á‡§Ç- ‡§π‡§æ‡§≤ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§¨‡§æ‡§§/‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§®‡•á ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§â‡§ï‡§∏‡§æ‡§Ø‡§æ?<br>' +
          '‚≠ê <b>‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?</b> ‡§™‡§π‡§≤‡•á ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•ã ‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§∞‡•á‡§Ç‚Äî‡§ó‡§π‡§∞‡•Ä ‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§Ç (<span class="kbd">/boxbreathe</span> ‡§ü‡•ç‡§∞‡§æ‡§Ø ‡§ï‡§∞‡•á‡§Ç), ‡§´‡§ø‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§∏‡•ã‡§ö/‡§≠‡§æ‡§µ ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç ‡§î‡§∞ ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§π‡•ã ‡§§‡•ã ‡§¨‡•ç‡§∞‡•á‡§ï ‡§≤‡•á‡§Ç‡•§'
          : 'Anger is a normal emotion, but it‚Äôs often triggered by lack of sleep, hunger, or underlying stress.<br><br>Think‚Äîwhat or who most annoyed you recently?<br>' +
          '‚≠ê <b>Try this:</b> Calm your body first (try deep breathing with <span class="kbd">/boxbreathe</span>), then notice your thoughts and feelings, and take a break if necessary.'
      , 'bot'
      );
      renderSuggestions(['/boxbreathe', '/ground', 'count to 10', 'anxiety']);
    }

    function handleLonely() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§Ö‡§ï‡•á‡§≤‡§æ‡§™‡§® ‡§Ü‡§™‡§ï‡•ã ‡§•‡§ï‡§æ ‡§Ø‡§æ ‡§Ü‡§π‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§™‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§∏‡•á ‡§§‡•Å‡§≤‡§®‡§æ, ‡§Ö‡§ï‡•á‡§≤‡•á ‡§∏‡§Æ‡§Ø ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§¨‡§ø‡§§‡§æ‡§®‡§æ, ‡§Ø‡§æ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§<br><br>' +
          '‚≠ê <b>‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®:</b> ‡§è‡§ï ‡§¶‡•ã‡§∏‡•ç‡§§ ‡§ï‡•ã ‡§∏‡§®‡•ç‡§¶‡•á‡§∂ ‡§≠‡•á‡§ú‡•á‡§Ç, ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•ç‡§≤‡§¨ ‡§Ø‡§æ ‡§ó‡•ç‡§∞‡•Å‡§™ ‡§ï‡•ã ‡§ú‡•â‡§á‡§® ‡§ï‡§∞‡•á‡§Ç, ‡§Ø‡§æ ‡§•‡•ã‡§°‡§º‡•Ä ‡§¶‡•á‡§∞ ‡§¨‡§æ‡§π‡§∞ ‡§ü‡§π‡§≤‡•á‡§Ç‡•§ ‡§π‡§≤‡•ç‡§ï‡•á ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§ï‡§¶‡§Æ ‡§¨‡§π‡•Å‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§π‡•ã ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§'
          : 'Loneliness can feel exhausting or painful. It may happen from comparing yourself to others online, spending too much time alone, or lacking a support network.<br><br>' +
          '‚≠ê <b>Natural solution:</b> Text a friend, join a group or club, or step outside for a while. Small social steps often help a lot.'
      , 'bot'
      );
      renderSuggestions(['text a friend', 'join a group', '/journal']);
    }

    function handleStudy() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡§æ ‡§§‡§®‡§æ‡§µ ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ‡§§‡§∞ ‡§§‡§¨ ‡§Ü‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§¨‡•ã‡§ù ‡§¨‡§°‡§º‡§æ ‡§≤‡§ó‡§®‡•á ‡§≤‡§ó‡•á ‡§Ø‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§≠‡§ü‡§ï‡§§‡§æ ‡§∞‡§π‡•á (‡§ú‡•à‡§∏‡•á ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§´‡•ã‡§® ‡§ö‡•á‡§ï ‡§ï‡§∞‡§®‡§æ)‡•§<br><br>' +
          '‡§ï‡§æ‡§∞‡§£: <ul><li>‡§Ö‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ/‡§°‡§ø‡§µ‡§æ‡§á‡§∏</li><li>‡§™‡•Ç‡§∞‡§æ ‡§® ‡§ï‡§∞ ‡§™‡§æ‡§®‡•á ‡§ï‡§æ ‡§°‡§∞</li><li>‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡§æ ‡§¨‡§°‡§º‡§æ ‡§π‡•ã‡§®‡§æ</li></ul>' +
          '‚≠ê <b>‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?</b> ‡§ï‡§æ‡§Æ ‡§ï‡•ã ‡§õ‡•ã‡§ü‡•á-‡§õ‡•ã‡§ü‡•á ‡§π‡§ø‡§∏‡•ç‡§∏‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§Å‡§ü‡•á‡§Ç (‡§™‡•ã‡§Æ‡•ã‡§°‡•ã‡§∞‡•ã: 25 ‡§Æ‡§ø‡§®‡§ü ‡§™‡§¢‡§º‡§æ‡§à + 5 ‡§Æ‡§ø‡§®‡§ü ‡§¨‡•ç‡§∞‡•á‡§ï)‡•§ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§≠‡§ü‡§ï‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§∏‡•á ‡§¶‡•Ç‡§∞‡•Ä ‡§¨‡§®‡§æ‡§Ø‡•á‡§Ç ‡§î‡§∞ ‡§∂‡•á‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§¨‡§®‡§æ‡§Ø‡•á‡§Ç‡•§'
          : 'Study or exam pressure is common, especially if the workload feels huge or your attention is scattered (like checking your phone repeatedly).<br><br>' +
          'Causes: <ul><li>Uncontrolled social media/device use</li><li>Fear of not completing tasks</li><li>Overwhelming tasks</li></ul>' +
          '‚≠ê <b>What helps?</b> Break tasks down (try Pomodoro: 25min work + 5min break). Put away distractions and plan a simple schedule.'
      , 'bot'
      );
      renderSuggestions(['/study', '/reframe', 'procrastination', 'breakdown tasks']);
    }

    function handleRelationship() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§§‡§®‡§æ‡§µ ‡§π‡•ã‡§®‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§π‡•à‚Äî‡§Ø‡§π ‡§¶‡•ã‡§∏‡•ç‡§§‡•ã‡§Ç, ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§Ø‡§æ ‡§∏‡§π‡§ï‡§∞‡•ç‡§Æ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§<br><br>‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§ú‡§°‡§º ‡§ó‡§≤‡§§‡§´‡§π‡§Æ‡•Ä ‡§Ø‡§æ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§™‡§∞ ‡§§‡•Å‡§≤‡§®‡§æ ‡§≠‡•Ä ‡§§‡§®‡§æ‡§µ ‡§¨‡§¢‡§º‡§æ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§<br>' +
          '‚≠ê <b>‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?</b> ‡§§‡§•‡•ç‡§Ø, ‡§≠‡§æ‡§µ‡§®‡§æ, ‡§ú‡§º‡§∞‡•Ç‡§∞‡§§ ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§≤‡§ø‡§ñ‡•á‡§Ç‡•§ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ ‡§∞‡§ñ‡•á‡§Ç, ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§π‡•ã ‡§§‡•ã ‡§∏‡•Ä‡§Æ‡§æ‡§è‡§Å ‡§¨‡§®‡§æ‡§Ø‡•á‡§Ç‡•§'
          : 'Relationship tension is normal‚Äîwith friends, family, or co-workers. At the root are often misunderstandings or lack of communication. Comparisons on social media can also create stress.<br>' +
          '‚≠ê <b>Try this:</b> Write out facts, feelings, needs, and requests. Communicate clearly, and set boundaries when needed.'
      , 'bot'
      );
      renderSuggestions(['/journal', '/reframe', 'talk to them', 'set boundary']);
    }

    function handleBody() {
      appendMessage(
        currentLang === 'hi'
          ? '‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•Ä ‡§õ‡§µ‡§ø ‡§ï‡•ã ‡§≤‡•á‡§ï‡§∞ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§Ö‡§ï‡§∏‡§∞ ‡§∏‡•ã‡§∂‡§≤ ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§§‡•Å‡§≤‡§®‡§æ ‡§Ø‡§æ ‡§Ü‡§≤‡•ã‡§ö‡§®‡§æ ‡§∏‡•Å‡§® ‡§≤‡•á‡§®‡•á ‡§∏‡•á ‡§™‡•à‡§¶‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§<br><br>‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä ‡§ó‡§æ‡§®‡•á ‡§î‡§∞ ‡§´‡§º‡§ø‡§≤‡•ç‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§õ‡§µ‡§ø ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡§Ç‡•§<br>' +
          '‚≠ê <b>‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç?</b> ‡§ñ‡•Å‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡§Ø‡§æ‡§≤‡•Å ‡§≠‡§æ‡§∑‡§æ ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Å, ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•Ä ‡§§‡§æ‡§ï‡§§ ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç, ‡§î‡§∞ ‡§ñ‡•Å‡§¶ ‡§ï‡•Ä ‡§§‡•Å‡§≤‡§®‡§æ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§ñ‡•Å‡§¶ ‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç‡•§'
          : 'Body image concerns often arise from social media comparisons or hearing criticism. Sometimes media and songs influence these perceptions.<br>' +
          '‚≠ê <b>Try this:</b> Practice kind language to yourself, focus on your body‚Äôs strengths, and compare yourself only to your past self.'
      , 'bot'
      );
      renderSuggestions(['/reframe', 'gratitude list', 'go for walk']);
    }

    function handleHelp() {
      const m = currentLang === 'hi'
        ? `‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ï‡§Æ‡§æ‡§Ç‡§°:
          <ul>
            <li><span class="kbd">/ground</span> ‚Äì 5-4-3-2-1 ‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°‡§ø‡§Ç‡§ó</li>
            <li><span class="kbd">/boxbreathe</span> ‚Äì ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§¨‡•ç‡§∞‡•Ä‡§¶‡§ø‡§Ç‡§ó (4-4-4-4)</li>
            <li><span class="kbd">/478</span> ‚Äì 4-7-8 ‡§¨‡•ç‡§∞‡•Ä‡§¶‡§ø‡§Ç‡§ó</li>
            <li><span class="kbd">/reframe</span> ‚Äì ‡§®‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§æ CBT ‡§∞‡§ø‡§´‡§º‡•ç‡§∞‡•á‡§Æ</li>
            <li><span class="kbd">/journal</span> ‚Äì ‡§ú‡§∞‡•ç‡§®‡§≤‡§ø‡§Ç‡§ó ‡§™‡•ç‡§∞‡•â‡§Æ‡•ç‡§™‡•ç‡§ü</li>
            <li><span class="kbd">/sleep</span> ‚Äì ‡§®‡•Ä‡§Ç‡§¶ ‡§π‡§æ‡§á‡§ú‡•Ä‡§® ‡§ü‡§ø‡§™‡•ç‡§∏</li>
            <li><span class="kbd">/study</span> ‚Äì ‡§´‡§º‡•ã‡§ï‡§∏/‡§™‡•ã‡§Æ‡•ã‡§°‡•ã‡§∞‡•ã ‡§∏‡•Å‡§ù‡§æ‡§µ</li>
            <li><span class="kbd">/helpnow</span> ‚Äì ‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≤‡§ø‡§ï ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂</li>
          </ul>`
        : `Available commands:
          <ul>
            <li><span class="kbd">/ground</span> ‚Äì 5-4-3-2-1 grounding</li>
            <li><span class="kbd">/boxbreathe</span> ‚Äì Box breathing (4-4-4-4)</li>
            <li><span class="kbd">/478</span> ‚Äì 4-7-8 breathing</li>
            <li><span class="kbd">/reframe</span> ‚Äì CBT thought reframe</li>
            <li><span class="kbd">/journal</span> ‚Äì Journaling prompt</li>
            <li><span class="kbd">/sleep</span> ‚Äì Sleep hygiene tips</li>
            <li><span class="kbd">/study</span> ‚Äì Focus/Pomodoro suggestions</li>
            <li><span class="kbd">/helpnow</span> ‚Äì Immediate help guidance</li>
          </ul>`;
      appendMessage(m, 'bot');
      renderSuggestions(['/ground', '/478', '/reframe']);
    }

    function handleToolCommand(text) {
      const cmd = text.match(/^\/(\w+)/)[1];
      const map = {
        ground: toolGround,
        boxbreathe: toolBox,
        '478': tool478,
        reframe: toolReframe,
        journal: toolJournal,
        sleep: toolSleep,
        study: toolStudy,
        helpnow: toolHelpNow,
      };
      if (map[cmd]) map[cmd]();
      else handleFallback(text);
    }

    function handleThanks() {
      appendMessage(currentLang === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§Ö‡§ï‡•á‡§≤‡•á ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç‚Äî‡§Æ‡•à‡§Ç ‡§∏‡§æ‡§• ‡§π‡•Ç‡§Å‡•§' : "You're welcome. You're not alone‚ÄîI'm with you.", 'bot');
      renderSuggestions(['something else', '/journal', '/ground']);
    }

    function handleBye() {
      appendMessage(currentLang === 'hi' ? '‡§ñ‡§º‡§Ø‡§æ‡§≤ ‡§∞‡§ñ‡•á‡§Ç‡•§ ‡§ú‡§¨ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§Ü‡§è‡§Å‡•§' : 'Take care. Come back anytime.', 'bot');
      renderSuggestions([]);
    }

    function handleFallback(text) {
      if (/[\u0900-\u097F]/.test(text) && currentLang !== 'hi') {
        setLang('hi');
      }
      const msg =
        currentLang === 'hi'
          ? '‡§Æ‡•à‡§Ç ‡§™‡•Ç‡§∞‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å ‡§∏‡§Æ‡§ù‡§®‡•á ‡§ï‡•Ä‡•§ ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§•‡•ã‡§°‡§º‡§æ ‡§î‡§∞ ‡§¨‡§§‡§æ‡§è‡§Å? ‡§Ü‡§™ <span class="kbd">/help</span> ‡§≠‡•Ä ‡§ü‡•ç‡§∞‡§æ‡§Ø ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§'
          : "I'm trying to understand. Could you share a bit more? You can also try <span class=\"kbd\">/help</span>.";
      appendMessage(msg, 'bot');
      renderSuggestions(['stress', 'sleep', 'anxiety', '/help']);
    }

    // ====== Tools ======
    function toolGround() {
      const m =
        currentLang === 'hi'
          ? `<b>5-4-3-2-1 ‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°‡§ø‡§Ç‡§ó</b><br>‡§Ø‡§π ‡§§‡§ï‡§®‡•Ä‡§ï ‡§Ü‡§™‡§ï‡•á ‡§Æ‡§® ‡§ï‡•ã ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§≤‡•á ‡§Ü‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡•ã ‡§ï‡§Æ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡•§ ‡§™‡§æ‡§Å‡§ö ‡§ö‡•Ä‡§ú‡§º‡•á‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç, ‡§ö‡§æ‡§∞ ‡§õ‡•Å‡§è‡§Ç, ‡§§‡•Ä‡§® ‡§∏‡•Å‡§®‡•á‡§Ç, ‡§¶‡•ã ‡§∏‡•Ç‡§Ç‡§ò‡•á‡§Ç, ‡§è‡§ï ‡§∏‡•ç‡§µ‡§æ‡§¶ ‡§ö‡§ñ‡•á‡§Ç‡•§ ‡§π‡§∞ ‡§∏‡•ç‡§ü‡•á‡§™ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ó‡§π‡§∞‡•Ä ‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§Ç‡•§`
          : `<b>5-4-3-2-1 Grounding</b><br>This technique brings your mind to the present and reduces anxiety. Notice five things you see, four you can touch, three you hear, two you smell, one you taste. Take deep breaths between steps.`;
      appendMessage(m, 'bot');
    }
    function toolBox() {
      const m =
        currentLang === 'hi'
          ? `<b>‡§¨‡•â‡§ï‡•ç‡§∏ ‡§¨‡•ç‡§∞‡•Ä‡§¶‡§ø‡§Ç‡§ó (4-4-4-4)</b><br>‡§Ø‡§π ‡§∏‡§æ‡§Ç‡§∏ ‡§≤‡•á‡§®‡•á ‡§ï‡•Ä ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∂‡§æ‡§Ç‡§§‡§ø ‡§î‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¨‡§¢‡§º‡§æ‡§§‡•Ä ‡§π‡•à‡•§ ‡§ö‡§æ‡§∞ ‡§∏‡•á‡§ï‡§Ç‡§° ‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§Ç, ‡§ö‡§æ‡§∞ ‡§∞‡•ã‡§ï‡•á‡§Ç, ‡§ö‡§æ‡§∞ ‡§õ‡•ã‡§°‡§º‡•á‡§Ç, ‡§´‡§ø‡§∞ ‡§ö‡§æ‡§∞ ‡§∞‡•ã‡§ï‡•á‡§Ç‡•§ ‡§á‡§∏‡•á 4-6 ‡§¨‡§æ‡§∞ ‡§¶‡•ã‡§π‡§∞‡§æ‡§è‡§Å‡•§`
          : `<b>Box Breathing (4-4-4-4)</b><br>This breathing technique enhances calmness and focus. Inhale for 4 seconds, hold for 4, exhale for 4, and hold again for 4. Repeat 4‚Äì6 rounds.`;
      appendMessage(m, 'bot');
    }
    function tool478() {
      const m =
        currentLang === 'hi'
          ? `<b>4-7-8 ‡§¨‡•ç‡§∞‡•Ä‡§¶‡§ø‡§Ç‡§ó</b><br>‡§Ø‡§π ‡§®‡§∞‡•ç‡§µ‡§∏ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ï‡•ã ‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ 4 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§®‡§æ‡§ï ‡§∏‡•á ‡§∏‡§æ‡§Ç‡§∏ ‡§≤‡•á‡§Ç, 7 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§∞‡•ã‡§ï‡•á‡§Ç, 8 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•Å‡§Å‡§π ‡§∏‡•á ‡§õ‡•ã‡§°‡§º‡•á‡§Ç‡•§ 4-8 ‡§¨‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§`
          : `<b>4-7-8 Breathing</b><br>This calms the nervous system. Inhale through your nose for 4 seconds, hold 7 seconds, exhale through your mouth for 8 seconds. Repeat 4‚Äì8 times.`;
      appendMessage(m, 'bot');
    }
    function toolReframe() {
      const m =
        currentLang === 'hi'
          ? `<b>CBT ‡§∞‡§ø‡§´‡§º‡•ç‡§∞‡•á‡§Æ</b><br>‡§®‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§∏‡•ã‡§ö ‡§ï‡•ã ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§¶‡•á‡§®‡•á ‡§ï‡§æ ‡§§‡§∞‡•Ä‡§ï‡§æ‡•§ ‡•ß) ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡•ã‡§ö, ‡•®) ‡§â‡§∏‡§ï‡•á ‡§≤‡§ø‡§è/‡§ñ‡§ø‡§≤‡§æ‡§´ ‡§∏‡§¨‡•Ç‡§§, ‡•©) ‡§è‡§ï ‡§∏‡§Ç‡§§‡•Å‡§≤‡§ø‡§§ ‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï ‡§∏‡•ã‡§ö‡•§ ‡§ú‡•à‡§∏‡•á: ‚Äú‡§Æ‡•à‡§Ç ‡§π‡§Æ‡•á‡§∂‡§æ ‡§´‡•á‡§≤ ‡§π‡•ã‡§§‡§æ ‡§π‡•Ç‡§Å‚Äù ‚Üí ‚Äú‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä ‡§ï‡§†‡§ø‡§®‡§æ‡§á‡§Ø‡§æ‡§Å ‡§Ü‡§§‡•Ä ‡§π‡•à‡§Ç, ‡§™‡§∞ ‡§Æ‡•à‡§Ç‡§®‡•á ‡§™‡§π‡§≤‡•á ‡§≠‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ ‡§™‡§æ‡§à ‡§π‡•à‡•§‚Äù`
          : `<b>CBT Reframe</b><br>A method to challenge negative thoughts. 1) Your thought, 2) Evidence for and against it, 3) A balanced alternative thought. Example: ‚ÄúI always fail‚Äù ‚Üí ‚ÄúSometimes it‚Äôs hard, but I‚Äôve succeeded before.‚Äù`;
      appendMessage(m, 'bot');
    }
    function toolJournal() {
      const m =
        currentLang === 'hi'
          ? `<b>‡§ú‡§∞‡•ç‡§®‡§≤‡§ø‡§Ç‡§ó ‡§™‡•ç‡§∞‡•â‡§Æ‡•ç‡§™‡•ç‡§ü</b><br>‡§Ü‡§ú ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•Å‡§Ü? ‡§Ü‡§™‡§®‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§ø‡§Ø‡§æ? ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§ú‡§º‡§∞‡•Ç‡§∞‡§§ ‡§™‡•Ç‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§à? ‡§Ö‡§ó‡§≤‡§æ ‡§õ‡•ã‡§ü‡§æ ‡§ï‡§¶‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à? ‡§≤‡§ø‡§ñ‡§ø‡§è‡•§`
          : `<b>Journaling Prompt</b><br>What happened today? What did you feel? What need was unmet? What tiny next step can you take? Write it down.`;
      appendMessage(m, 'bot');
    }
    function toolSleep() {
      const m =
        currentLang === 'hi'
          ? `<b>‡§®‡•Ä‡§Ç‡§¶ ‡§π‡§æ‡§á‡§ú‡•Ä‡§® ‡§ü‡§ø‡§™‡•ç‡§∏</b><ul><li>‡§π‡§∞ ‡§¶‡§ø‡§® ‡§è‡§ï ‡§π‡•Ä ‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§∏‡•ã‡§®‡•á ‡§î‡§∞ ‡§ú‡§æ‡§ó‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç</li><li>‡§∏‡•ã‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡•á 1-2 ‡§ò‡§Ç‡§ü‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</li><li>‡§∂‡§æ‡§Æ 4 ‡§¨‡§ú‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§ï‡•à‡§´‡•Ä‡§® ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç</li><li>‡§ï‡§Æ‡§∞‡§æ ‡§†‡§Ç‡§°‡§æ ‡§î‡§∞ ‡§Ö‡§Ç‡§ß‡•á‡§∞‡§æ ‡§∞‡§ñ‡•á‡§Ç</li><li>‡§¨‡§ø‡§∏‡•ç‡§§‡§∞ ‡§ï‡•á‡§µ‡§≤ ‡§∏‡•ã‡§®‡•á ‡§î‡§∞ ‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡§ñ‡•á‡§Ç</li></ul>`
          : `<b>Sleep Hygiene Tips</b><ul><li>Try to sleep and wake at the same time every day</li><li>Turn off screens 1-2 hours before bed</li><li>Avoid caffeine after 4 PM</li><li>Keep your room cool and dark</li><li>Use your bed only for sleeping and relaxing</li></ul>`;
      appendMessage(m, 'bot');
    }
    function toolStudy() {
      const m =
        currentLang === 'hi'
          ? `<b>‡§´‡§º‡•ã‡§ï‡§∏ (‡§™‡•ã‡§Æ‡•ã‡§°‡•ã‡§∞‡•ã) ‡§§‡§ï‡§®‡•Ä‡§ï</b><br>‡•®‡•´ ‡§Æ‡§ø‡§®‡§ü ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç, ‡§´‡§ø‡§∞ ‡•´ ‡§Æ‡§ø‡§®‡§ü ‡§ï‡§æ ‡§¨‡•ç‡§∞‡•á‡§ï ‡§≤‡•á‡§Ç‡•§ ‡§á‡§∏‡•á ‡§ö‡§æ‡§∞ ‡§¨‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç, ‡§´‡§ø‡§∞ ‡§è‡§ï ‡§≤‡§Ç‡§¨‡§æ ‡§¨‡•ç‡§∞‡•á‡§ï‡•§ ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡•ã ‡§õ‡•ã‡§ü‡•á-‡§õ‡•ã‡§ü‡•á ‡§π‡§ø‡§∏‡•ç‡§∏‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§Ç‡§ü‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§á‡§∏‡•á ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§®‡§æ ‡§Ü‡§∏‡§æ‡§® ‡§π‡•ã‡•§`
          : `<b>Focus (Pomodoro) Technique</b><br>Study for 25 minutes, then take a 5-minute break. Repeat this four times, then take a longer break. Break work into smaller parts to make it manageable.`;
      appendMessage(m, 'bot');
    }
    function toolHelpNow() {
      const m =
        currentLang === 'hi'
          ? `<b>‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</b><br>‡§Ö‡§ó‡§∞ ‡§ñ‡§§‡§∞‡§æ ‡§π‡•à: ‡•ß) ‡§Ü‡§∏‡§™‡§æ‡§∏ ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•ã ‡§¨‡§§‡§æ‡§è‡§Ç ‡•®) ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡§Ç‡§¨‡§∞ (<b>112</b>) ‡§™‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç ‡•©) ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§Ø‡§æ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§ú‡§æ‡§è‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•Ç‡§Å‡•§`
          : `<b>Immediate Help</b><br>If at risk: 1) Tell someone nearby 2) Call your local emergency number (e.g., <b>112</b>) 3) Go to the nearest hospital or clinic. I'm with you.`;
      appendMessage(m, 'bot');
    }

    // ====== Suggestions ======
    function renderSuggestions(items) {
      suggestions.innerHTML = '';
      (items || []).forEach(it =>
        suggestions.appendChild(
          chip(String(it), () => {
            inputBox.value = it;
            sendMessage();
          })
        )
      );
    }

    // ====== I/O ======
    function sendMessage() {
      const userInput = inputBox.value.trim();
      if (!userInput) return;
      appendMessage(userInput, 'user');
      inputBox.value = '';
      setTyping(true);
      setTimeout(() => {
        setTyping(false);
        route(userInput);
      }, 450);
    }

    // ====== Events ======
    sendBtn.addEventListener('click', sendMessage);
    inputBox.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendMessage();
    });
    langHindi.addEventListener('click', () => setLang('hi'));
    langEnglish.addEventListener('click', () => setLang('en'));
    document.querySelectorAll('[data-tool]').forEach(el =>
      el.addEventListener('click', () => {
        inputBox.value = el.dataset.tool;
        sendMessage();
      })
    );

    themeToggle.addEventListener('click', () => {
      if (body.getAttribute('data-theme') === 'light') {
        body.setAttribute('data-theme', 'dark');
        themeToggle.textContent = 'Light Mode';
      } else {
        body.setAttribute('data-theme', 'light');
        themeToggle.textContent = 'Dark Mode';
      }
    });

    // ====== Boot ======
    setLang('en');
  </script>
</body>
</html>
